<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>AI Ecosystem Matrix 2026</title>
  <style>
    :root{
      --bg:#0b0c0f;
      --panel:#111318;
      --panel2:#0e1014;
      --text:#e8eefc;
      --muted:#a6adbb;
      --line:rgba(255,255,255,.08);
      --good:rgba(80, 230, 140,.15);
      --mid:rgba(255, 200, 80,.15);
      --bad:rgba(255, 90, 120,.15);
      --chip:rgba(255,255,255,.06);
      --shadow:0 10px 30px rgba(0,0,0,.35);
      --radius:16px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }

    *{box-sizing:border-box}
    html, body{height:100%}
    body{
      margin:0;
      overflow:hidden; /* key: prevents the page from "spilling" outside viewport */
      background:radial-gradient(1200px 700px at 20% 0%, #141821 0%, var(--bg) 55%);
      color:var(--text);
      font-family:var(--sans);
    }
    a{color:#9bd3ff;text-decoration:none}
    a:hover{text-decoration:underline}

    /* Layout */
    .wrap{
      height:100vh;
      min-height:0;
      display:grid;
      grid-template-columns:320px 1fr;
      gap:16px;
      padding:16px;
      max-width:1560px;
      margin:0 auto;
    }
    .card{
      background:linear-gradient(180deg,var(--panel) 0%, var(--panel2) 100%);
      border:1px solid var(--line);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      min-width:0; /* key: prevents overflow in grid children */
    }

    .side{
      padding:14px;
      display:flex;
      flex-direction:column;
      gap:12px;
      overflow:auto;
      min-height:0;
    }
    .main{
      display:flex;
      flex-direction:column;
      overflow:hidden;
      min-height:0;
    }

    .title{display:flex;flex-direction:column;gap:4px}
    .title h1{font-size:18px;margin:0}
    .title p{margin:0;color:var(--muted);font-size:12px;line-height:1.35}

    .row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .row label{font-size:12px;color:var(--muted)}

    input[type="text"], select{
      width:100%;
      padding:10px 12px;
      border-radius:12px;
      border:1px solid var(--line);
      background:rgba(0,0,0,.25);
      color:var(--text);
      outline:none;
    }

    .seg{display:flex;border:1px solid var(--line);border-radius:999px;overflow:hidden}
    .seg button{
      flex:1;
      padding:10px 12px;
      background:transparent;
      color:var(--muted);
      border:0;
      cursor:pointer;
      font-size:12px;
      white-space:nowrap;
    }
    .seg button.active{background:rgba(255,255,255,.08);color:var(--text)}

    .chips{display:flex;flex-wrap:wrap;gap:8px}
    .chip{
      background:var(--chip);
      border:1px solid var(--line);
      padding:6px 10px;
      border-radius:999px;
      font-size:12px;
      color:var(--muted);
      cursor:pointer;
      user-select:none;
    }
    .chip.on{color:var(--text);background:rgba(155, 211, 255,.12);border-color:rgba(155, 211, 255,.35)}

    .bar{
      padding:12px 14px;
      border-bottom:1px solid var(--line);
      display:flex;
      gap:10px;
      align-items:center;
      justify-content:space-between;
      flex:0 0 auto;
    }
    .bar .left{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
    .kpi{display:flex;gap:10px;align-items:center}
    .pill{font-size:11px;color:var(--muted);border:1px solid var(--line);padding:6px 10px;border-radius:999px;background:rgba(0,0,0,.25)}

    .tableWrap{
      overflow:auto;
      flex:1 1 auto;
      min-height:0;
    }

    table{width:100%;border-collapse:separate;border-spacing:0;table-layout:fixed}

    thead th{
      position:sticky;
      top:0;
      background:rgba(16,20,33,.95);
      backdrop-filter: blur(8px);
      border-bottom:1px solid var(--line);
      text-align:left;
      font-size:12px;
      color:var(--muted);
      padding:12px 12px;
      white-space:nowrap;
      z-index:2;
    }

    tbody td{
      border-bottom:1px solid var(--line);
      padding:12px 12px;
      vertical-align:top;
      font-size:13px;
      overflow-wrap:anywhere;
    }
    tbody tr:hover td{background:rgba(255,255,255,.03)}

    .name{display:flex;flex-direction:column;gap:4px}
    .name .brand{font-weight:650}
    .name .sub{font-size:12px;color:var(--muted)}

    .tags{display:flex;flex-wrap:wrap;gap:6px}
    .tag{font-size:11px;padding:4px 8px;border-radius:999px;border:1px solid var(--line);background:rgba(0,0,0,.22);color:var(--muted)}

    .cell{display:flex;flex-direction:column;gap:8px;min-width:0}
    .grid2{display:grid;grid-template-columns:1fr 1fr;gap:8px}
    .metric{border:1px solid var(--line);background:rgba(0,0,0,.18);border-radius:12px;padding:10px;min-width:0}
    .metric .h{font-size:11px;color:var(--muted)}
    .metric .v{font-family:var(--mono);font-size:12px;margin-top:6px;white-space:normal}

    .badge{display:inline-flex;align-items:center;gap:8px}
    .dot{width:8px;height:8px;border-radius:99px;background:#7aa2ff;opacity:.9}
    .good{background:var(--good)}
    .mid{background:var(--mid)}
    .bad{background:var(--bad)}

    .note{font-size:12px;color:var(--muted);line-height:1.4}
    .small{font-size:11px;color:var(--muted)}

    details{
      border:1px solid var(--line);
      border-radius:12px;
      background:rgba(0,0,0,.18);
      padding:10px 12px;
    }
    details > summary{cursor:pointer;color:var(--text);font-size:12px}
    details .note{margin-top:8px}

    @media (max-width: 1024px){
      body{overflow:auto}
      .wrap{grid-template-columns:1fr; height:auto; min-height:auto}
      .main{min-height:70vh}
    }
  </style>
</head>
<body>
  <div class="wrap">
    <aside class="card side">
      <div class="title">
        <h1>AI Ecosystem Matrix 2026</h1>
        <p>Uma única tabela com filtros e ordenação (estilo Arena). Dados de “qualidade” podem ser preenchidos via Arena/benchmarks.</p>
      </div>

      <div>
        <label for="q">Buscar (vendor, feature, nota)</label>
        <input id="q" type="text" placeholder="ex.: plugins, health, notebook, MCP, preço" />
      </div>

      <div>
        <label>Visão</label>
        <div class="seg" role="tablist" aria-label="Visões">
          <button id="view_features" class="active" type="button">Features</button>
          <button id="view_pricing" type="button">Preços</button>
          <button id="view_quality" type="button">Qualidade</button>
          <button id="view_compare" type="button">Comparar</button>
        </div>
      </div>

      <div>
        <label>Filtrar por domínio</label>
        <div class="chips" id="domainChips"></div>
        <div class="small">Dica: selecione múltiplos domínios para ver “stack” por objetivo.</div>
      </div>

      <div class="row">
        <div style="flex:1">
          <label for="sortBy">Ordenar por</label>
          <select id="sortBy">
            <option value="brand">Vendor</option>
            <option value="eco">Ecosystem size (proxy)</option>
            <option value="price">Preço (mín.)</option>
            <option value="quality">Qualidade (proxy)</option>
          </select>
        </div>
        <div style="width:140px">
          <label for="sortDir">Ordem</label>
          <select id="sortDir">
            <option value="desc">Desc</option>
            <option value="asc">Asc</option>
          </select>
        </div>
      </div>

      <div class="note">
        <b>Comparar</b>
        <div class="small">Ao abrir, tudo vem selecionado por padrão.</div>
      </div>

      <div>
        <label>Selecionados</label>
        <div class="chips" id="selectedChips"></div>
        <div class="small">Clique para remover/adicionar. Use <b>Comparar</b> na barra “Visão”.</div>
      </div>

      <div>
        <label>Colunas na comparação</label>
        <div class="chips" id="compareCols"></div>
      </div>

      <details>
        <summary><b>Modelo mental:</b> Cowork plugins/skills vs GPTs/Gems</summary>
        <div class="note">
          <ul style="margin:8px 0 0 18px; padding:0;">
            <li><b>Plugins (Cowork)</b>: integrações/ações no ambiente (admin/empresa), não “pacotes instaláveis” do usuário final.</li>
            <li><b>Skills</b>: capacidades/ações expostas pelos plugins (ex.: criar ticket, buscar docs, resumir reunião).</li>
            <li><b>GPTs (OpenAI)</b> / <b>Gems (Google)</b>: mais próximos de agent/persona configurável (instruções + ferramentas), geralmente compartilhável.</li>
            <li><b>Cowork plugin + skills</b>: mais próximo de Connectors/Actions/Tooling layer (integrações corporativas) do que de um marketplace de agentes.</li>
          </ul>
        </div>
      </details>

      <div class="note">
        <b>Como preencher melhor:</b>
        <ol style="margin:8px 0 0 18px; padding:0;">
          <li>Atualize campos de preço (Free/Pro/Team/Enterprise).</li>
          <li>Preencha “qualityProxy” por domínio (Arena/benchmarks).</li>
          <li>Ajuste “ecoProxy” (nº integrações, marketplace, SDKs, etc.).</li>
        </ol>
      </div>

      <div class="note">
        <b>Nota:</b> se algum item (ex.: “Prism”) for ambíguo no seu contexto, substitua o texto no dataset.
      </div>
    </aside>

    <main class="card main">
      <div class="bar">
        <div class="left">
          <span class="badge"><span class="dot"></span><b id="headline">Comparação de Features</b></span>
          <span class="pill" id="countPill">0 vendors</span>
        </div>
        <div class="kpi">
          <span class="pill">Atualização manual • “Arena-like” UI</span>
        </div>
      </div>

      <div class="tableWrap" aria-label="Tabela">
        <table id="tbl">
          <thead>
            <tr id="thead"></tr>
          </thead>
          <tbody id="tbody"></tbody>
        </table>
      </div>
    </main>
  </div>

  <script>
  // =====================
  //  DATASET (edite aqui)
  // =====================
  const DOMAINS = [
    {k:'marketplace', t:'Marketplace / Agents'},
    {k:'integrations', t:'Ações / Conectores / Plugins'},
    {k:'notebook', t:'Notebook / Knowledge'},
    {k:'health', t:'Saúde'},
    {k:'dev', t:'Dev / Agents'},
    {k:'multimodal', t:'Multimodal (img/video)'},
  ];

  const VENDORS = [
    {
      brand: 'OpenAI',
      products: ['ChatGPT', 'GPTs', 'Actions/Connectors', 'Codex/Agents'],
      domains: ['marketplace','integrations','notebook','health','dev','multimodal'],
      ecoProxy: 9, // proxy (0-10)
      qualityProxy: 9, // proxy (0-10)
      capabilities: { text: 9, code: 9, vision: 9, ctx: 9 },
      notes: {
        marketplace: 'GPT Store (GPTs como “apps”).',
        integrations: 'Actions/Connectors (varia por plano) + APIs.',
        notebook: 'Projects + memory/knowledge (não “notebook-first” puro).',
        health: 'Iniciativas/benchmarks e parcerias (depende do produto).',
        dev: 'APIs, SDKs, Agents/Codex, ferramentas de automação.',
        multimodal: 'Imagem e vídeo (varia por modelo/plano).'
      },
      pricing: {
        free: 'Sim (limitado)',
        pro: 'Sim (ChatGPT Plus/Pro)',
        team: 'Sim',
        enterprise: 'Sim',
        api: 'Pay-as-you-go'
      },
      quality: {
        overall: 'Alto (proxy)',
        coding: 'Alto (proxy)',
        vision: 'Alto (proxy)',
        longctx: 'Alto (proxy)'
      }
    },
    {
      brand: 'Anthropic (Claude)',
      products: ['Claude', 'Projects', 'MCP', 'Cowork plugins/skills'],
      domains: ['integrations','dev','notebook','multimodal'],
      ecoProxy: 7,
      qualityProxy: 8,
      capabilities: { text: 8, code: 9, vision: 8, ctx: 9 },
      notes: {
        marketplace: 'Sem “store” público tipo GPT Store.',
        integrations: 'Cowork plugins expõem skills (ações) + MCP para ferramentas externas.',
        notebook: 'Projects com contexto persistente (não NotebookLM).',
        health: 'Sem vertical “productizada” pública (varia por parceiros).',
        dev: 'MCP + SDKs + uso forte para code/agents.',
        multimodal: 'Visão (dependendo do plano/modelo).'
      },
      pricing: { free:'Depende do país', pro:'Sim', team:'Sim', enterprise:'Sim', api:'Pay-as-you-go' },
      quality: { overall:'Alto (proxy)', coding:'Alto (proxy)', vision:'Médio/Alto (proxy)', longctx:'Alto (proxy)' }
    },
    {
      brand: 'Google (Gemini)',
      products: ['Gemini', 'Gems', 'Workspace', 'NotebookLM'],
      domains: ['marketplace','integrations','notebook','dev','multimodal','health'],
      ecoProxy: 8,
      qualityProxy: 8,
      capabilities: { text: 8, code: 8, vision: 9, ctx: 8 },
      notes: {
        marketplace: 'Gems (assistentes configuráveis) + ecossistema Workspace.',
        integrations: 'Integrações profundas com Google Workspace e ferramentas Google.',
        notebook: 'NotebookLM (notebook-first, fontes, síntese).',
        health: 'Muitos produtos setoriais/Cloud (não um “GPT for Health” único).',
        dev: 'Vertex AI / Gemini API / tooling cloud.',
        multimodal: 'Imagem/voz dependendo do produto.'
      },
      pricing: { free:'Sim (limitado)', pro:'Sim', team:'Sim (Workspace)', enterprise:'Sim', api:'Pay-as-you-go (Vertex/Gemini API)' },
      quality: { overall:'Alto (proxy)', coding:'Alto (proxy)', vision:'Alto (proxy)', longctx:'Alto (proxy)' }
    },
    {
      brand: 'Perplexity',
      products: ['Perplexity', 'Spaces', 'Search'],
      domains: ['notebook','integrations','marketplace'],
      ecoProxy: 5,
      qualityProxy: 7,
      capabilities: { text: 8, code: 6, vision: 0, ctx: 6 },
      notes: {
        marketplace: 'Spaces como “apps”/workflows.',
        integrations: 'Conectores variam; foco em pesquisa.',
        notebook: 'Workspaces/coleções; forte em “answer + sources”.',
        health: 'Não é vertical principal.',
        dev: 'Bom para pesquisa dev; menos “agent SDK”.',
        multimodal: 'Secundário.'
      },
      pricing: { free:'Sim', pro:'Sim', team:'Limitado', enterprise:'Alguns planos', api:'—' },
      quality: { overall:'Alto em search (proxy)', coding:'Médio (proxy)', vision:'—', longctx:'—' }
    }
  ];

  // =====================
  //  UI STATE
  // =====================
  let view = 'features';
  let domainFilter = new Set();
  let query = '';

  // Compare state (default: all vendors selected)
  const selected = new Set(VENDORS.map(v => v.brand));
  const compareColumns = new Set(['domains','ecosystem','quality','capabilities','pricing','notes']);

  const elQ = document.getElementById('q');
  const elSortBy = document.getElementById('sortBy');
  const elSortDir = document.getElementById('sortDir');
  const elTHead = document.getElementById('thead');
  const elTBody = document.getElementById('tbody');
  const elCount = document.getElementById('countPill');
  const elHeadline = document.getElementById('headline');

  // View buttons
  const btnF = document.getElementById('view_features');
  const btnP = document.getElementById('view_pricing');
  const btnQ = document.getElementById('view_quality');
  const btnC = document.getElementById('view_compare');

  const elSelectedChips = document.getElementById('selectedChips');
  const elCompareCols = document.getElementById('compareCols');

  btnF.onclick = () => setView('features');
  btnP.onclick = () => setView('pricing');
  btnQ.onclick = () => setView('quality');
  btnC.onclick = () => setView('compare');

  function setView(v){
    view = v;
    btnF.classList.toggle('active', v==='features');
    btnP.classList.toggle('active', v==='pricing');
    btnQ.classList.toggle('active', v==='quality');
    btnC.classList.toggle('active', v==='compare');

    // default behavior: comparison opens with all selected
    if (v === 'compare' && selected.size === 0) {
      VENDORS.forEach(x => selected.add(x.brand));
    }

    elHeadline.textContent = v==='features'
      ? 'Comparação de Features'
      : (v==='pricing'
        ? 'Matriz de Preços'
        : (v==='quality'
          ? 'Qualidade (proxy/Arena)'
          : 'Comparação (selecionados)'));
    render();
  }

  // Domain chips
  const chipWrap = document.getElementById('domainChips');
  DOMAINS.forEach(d => {
    const c = document.createElement('div');
    c.className = 'chip';
    c.textContent = d.t;
    c.onclick = () => {
      if(domainFilter.has(d.k)) domainFilter.delete(d.k); else domainFilter.add(d.k);
      c.classList.toggle('on');
      render();
    };
    chipWrap.appendChild(c);
  });

  function renderSelectedChips(){
    if (!elSelectedChips) return;
    elSelectedChips.innerHTML = '';
    VENDORS.forEach(v => {
      const c = document.createElement('div');
      c.className = 'chip' + (selected.has(v.brand) ? ' on' : '');
      c.textContent = v.brand;
      c.onclick = () => {
        if (selected.has(v.brand)) selected.delete(v.brand);
        else selected.add(v.brand);
        // never allow empty if currently in compare
        if (view === 'compare' && selected.size === 0) {
          VENDORS.forEach(x => selected.add(x.brand));
        }
        renderSelectedChips();
        render();
      };
      elSelectedChips.appendChild(c);
    });
  }

  const COLS = [
    {k:'domains', t:'Domínios'},
    {k:'ecosystem', t:'Ecosystem'},
    {k:'quality', t:'Qualidade'},
    {k:'capabilities', t:'Capacidades (texto/código/visão/ctx)'},
    {k:'pricing', t:'Preço/Planos'},
    {k:'notes', t:'Notas'}
  ];

  function renderCompareCols(){
    if (!elCompareCols) return;
    elCompareCols.innerHTML = '';
    COLS.forEach(col => {
      const c = document.createElement('div');
      c.className = 'chip' + (compareColumns.has(col.k) ? ' on' : '');
      c.textContent = col.t;
      c.onclick = () => {
        if (compareColumns.has(col.k)) compareColumns.delete(col.k);
        else compareColumns.add(col.k);
        renderCompareCols();
        render();
      };
      elCompareCols.appendChild(c);
    });
  }

  elQ.addEventListener('input', e => { query = (e.target.value||'').trim().toLowerCase(); render(); });
  elSortBy.addEventListener('change', render);
  elSortDir.addEventListener('change', render);

  function matchVendor(v){
    const blob = JSON.stringify(v).toLowerCase();
    if(query && !blob.includes(query)) return false;
    if(domainFilter.size){
      for(const d of domainFilter){
        if(!v.domains.includes(d)) return false;
      }
    }
    return true;
  }

  function sortVendors(arr){
    const by = elSortBy.value;
    const dir = elSortDir.value === 'asc' ? 1 : -1;
    return arr.sort((a,b)=>{
      let av, bv;
      if(by==='brand'){ av=a.brand; bv=b.brand; return av.localeCompare(bv)*dir; }
      if(by==='eco'){ av=a.ecoProxy||0; bv=b.ecoProxy||0; return (av-bv)*dir; }
      if(by==='quality'){ av=a.qualityProxy||0; bv=b.qualityProxy||0; return (av-bv)*dir; }
      if(by==='price'){
        // heuristic: “free” better, then “pro”, else unknown
        const score = (p)=> (p?.free?.startsWith('Sim')?3:0) + (p?.pro?.startsWith('Sim')?2:0) + (p?.team?.startsWith('Sim')?1:0);
        av = score(a.pricing); bv = score(b.pricing);
        return (av-bv)*dir;
      }
      return 0;
    });
  }

  function setHead(cols){
    elTHead.innerHTML='';
    cols.forEach(c=>{
      const th=document.createElement('th');
      th.textContent=c;
      elTHead.appendChild(th);
    });
  }

  function td(html, cls=''){
    const el=document.createElement('td');
    if(cls) el.className=cls;
    el.innerHTML=html;
    return el;
  }

  function tags(list){
    return '<div class="tags">'+list.map(x=>`<span class="tag">${x}</span>`).join('')+'</div>';
  }

  function scoreClass(x){
    if(x>=8) return 'good';
    if(x>=6) return 'mid';
    return 'bad';
  }

  function render(){
    let rows = VENDORS.filter(matchVendor);
    rows = sortVendors(rows);
    elCount.textContent = rows.length + ' vendors';

    if(view==='features'){
      setHead(['Vendor', 'Domínios', 'Ecosystem (proxy)', 'Features / Observações']);
      elTBody.innerHTML='';
      rows.forEach(v=>{
        const tr=document.createElement('tr');
        tr.appendChild(td(`<div class="name"><div class="brand">${v.brand}</div><div class="sub">${(v.products||[]).join(' • ')}</div></div>`));
        tr.appendChild(td(tags(v.domains.map(d=>DOMAINS.find(x=>x.k===d)?.t||d))));
        tr.appendChild(td(`<div class="cell"><div class="metric ${scoreClass(v.ecoProxy||0)}"><div class="h">ecoProxy (0–10)</div><div class="v">${v.ecoProxy ?? '—'}</div></div><div class="metric"><div class="h">qualityProxy (0–10)</div><div class="v">${v.qualityProxy ?? '—'}</div></div></div>`));
        const feats = DOMAINS.map(d=>{
          const val = v.notes?.[d.k] || (v.domains.includes(d.k)?'Sim':'—');
          return `<div class="metric"><div class="h">${d.t}</div><div class="v">${val}</div></div>`;
        }).join('');
        tr.appendChild(td(`<div class="cell">${feats}</div>`));
        elTBody.appendChild(tr);
      });
    }

    if(view==='pricing'){
      setHead(['Vendor', 'Planos', 'API', 'Notas']);
      elTBody.innerHTML='';
      rows.forEach(v=>{
        const tr=document.createElement('tr');
        tr.appendChild(td(`<div class="name"><div class="brand">${v.brand}</div><div class="sub">${(v.products||[]).join(' • ')}</div></div>`));
        const p=v.pricing||{};
        tr.appendChild(td(`<div class="cell"><div class="grid2">
          <div class="metric"><div class="h">Free</div><div class="v">${p.free||'—'}</div></div>
          <div class="metric"><div class="h">Pro</div><div class="v">${p.pro||'—'}</div></div>
          <div class="metric"><div class="h">Team</div><div class="v">${p.team||'—'}</div></div>
          <div class="metric"><div class="h">Enterprise</div><div class="v">${p.enterprise||'—'}</div></div>
        </div></div>`));
        tr.appendChild(td(`<div class="metric"><div class="h">API</div><div class="v">${p.api||'—'}</div></div>`));
        tr.appendChild(td(`<div class="note">Preencha valores exatos (R$/US$) e limites (mensagens, seats, tools). Aqui é a estrutura.</div>`));
        elTBody.appendChild(tr);
      });
    }

    if(view==='quality'){
    if(view==='compare'){
      setHead(['Item', 'Comparação']);
      elTBody.innerHTML='';

      const selectedRows = rows.filter(v => selected.has(v.brand));
      // If nothing is selected for any reason, fall back to all
      const finalRows = selectedRows.length ? selectedRows : rows;

      finalRows.forEach(v => {
        const tr = document.createElement('tr');

        const left = `<div class="name"><div class="brand">${v.brand}</div><div class="sub">${(v.products||[]).join(' • ')}</div></div>`;

        const parts = [];

        if (compareColumns.has('ecosystem')) {
          parts.push(`<div class="metric ${scoreClass(v.ecoProxy||0)}"><div class="h">Ecosystem (0–10)</div><div class="v">${v.ecoProxy ?? '—'}</div></div>`);
        }

        if (compareColumns.has('quality')) {
          parts.push(`<div class="metric ${scoreClass(v.qualityProxy||0)}"><div class="h">Qualidade (0–10)</div><div class="v">${v.qualityProxy ?? '—'}</div></div>`);
        }

        if (compareColumns.has('capabilities')) {
          const c = v.capabilities || {};
          parts.push(`<div class="metric"><div class="h">Capacidades (0–10)</div><div class="v">texto: ${c.text ?? '—'} • code: ${c.code ?? '—'} • visão: ${c.vision ?? '—'} • ctx: ${c.ctx ?? '—'}</div></div>`);
        }

        if (compareColumns.has('pricing')) {
          const p = v.pricing || {};
          parts.push(`<div class="metric"><div class="h">Preço / Planos</div><div class="v">Free: ${p.free||'—'} • Pro: ${p.pro||'—'} • Team: ${p.team||'—'} • Ent: ${p.enterprise||'—'}</div></div>`);
        }

        if (compareColumns.has('domains')) {
          parts.push(`<div class="metric"><div class="h">Domínios</div><div class="v">${(v.domains||[]).map(d=>DOMAINS.find(x=>x.k===d)?.t||d).join(' • ')}</div></div>`);
        }

        if (compareColumns.has('notes')) {
          parts.push(`<div class="metric"><div class="h">Notas</div><div class="v">${Object.values(v.notes||{}).filter(Boolean).slice(0,4).join(' ')} </div></div>`);
        }

        tr.appendChild(td(left));
        tr.appendChild(td(`<div class="cell">${parts.join('')}</div>`));
        elTBody.appendChild(tr);
      });
    }
      setHead(['Vendor', 'Quality (proxy)', 'Domínios (proxy/Arena)', 'Observações']);
      elTBody.innerHTML='';
      rows.forEach(v=>{
        const tr=document.createElement('tr');
        tr.appendChild(td(`<div class="name"><div class="brand">${v.brand}</div><div class="sub">proxy: ajuste com Arena/benchmarks</div></div>`));
        tr.appendChild(td(`<div class="cell"><div class="metric ${scoreClass(v.qualityProxy||0)}"><div class="h">qualityProxy (0–10)</div><div class="v">${v.qualityProxy ?? '—'}</div></div></div>`));
        const q=v.quality||{};
        tr.appendChild(td(`<div class="cell"><div class="grid2">
          <div class="metric"><div class="h">Overall</div><div class="v">${q.overall||'—'}</div></div>
          <div class="metric"><div class="h">Coding</div><div class="v">${q.coding||'—'}</div></div>
          <div class="metric"><div class="h">Vision</div><div class="v">${q.vision||'—'}</div></div>
          <div class="metric"><div class="h">Long context</div><div class="v">${q.longctx||'—'}</div></div>
        </div></div>`));
        tr.appendChild(td(`<div class="note">Se você tiver um CSV/export do Arena, dá para substituir esses campos por números (Elo/score) e ordenar “de verdade”.</div>`));
        elTBody.appendChild(tr);
      });
    }
  }

  renderSelectedChips();
  renderCompareCols();
  render();
  </script>
</body>
</html>